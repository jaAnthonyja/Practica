<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carrito y Pago</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #b3b6bb;
      margin: 0;
      padding: 2rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      background: #074374fa;
      color: white;
      padding: 1rem 2rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      text-align: center;
      width: 100%;
      max-width: 600px;
    }
    .carrito-container {
      background: white;
      padding: 1.5rem 2rem;
      border-radius: 12px;
      max-width: 600px;
      width: 90%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    ul {
      list-style: none;
      padding-left: 0;
      margin-bottom: 1.5rem;
    }
    li {
      padding: 0.5rem 0;
      border-bottom: 1px solid #ddd;
      display: flex;
      justify-content: space-between;
    }
    .total {
      font-weight: bold;
      font-size: 1.3rem;
      margin-bottom: 1.5rem;
      text-align: right;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    label {
      display: flex;
      flex-direction: column;
      font-weight: bold;
    }
    input {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      margin-top: 0.3rem;
    }
    button {
      background: #0078d4;
      color: white;
      border: none;
      padding: 0.7rem;
      font-size: 1.1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #005fa3;
    }
    .mensaje {
      margin-top: 1rem;
      font-weight: bold;
      color: green;
      text-align: center;
    }
    .mensaje-vacio {
      font-weight: bold;
      color: #a00;
      text-align: center;
      margin: 2rem 0;
    }
  </style>
</head>
<body>
  <h1>Carrito de Compras</h1>
  <div class="carrito-container">
    <ul id="lista-carrito"></ul>
    <div class="total" id="total-carrito"></div>

    <form id="formulario-pago">
      <label>
        Nombre Completo
        <input type="text" id="nombre" required />
      </label>
      <label>
        Tarjeta de Crédito
        <input type="text" id="tarjeta" maxlength="16" pattern="\d{16}" placeholder="1234 5678 9012 3456" required />
      </label>
      <label>
        Fecha de Expiración
        <input type="month" id="expiracion" required />
      </label>
      <label>
        CVV
        <input type="text" id="cvv" maxlength="3" pattern="\d{3}" placeholder="123" required />
      </label>
      <button type="submit">Confirmar Compra</button>
    </form>

    <div class="mensaje" id="mensaje-compra" style="display:none;"></div>
    <div class="mensaje-vacio" id="mensaje-vacio" style="display:none;">El carrito está vacío.</div>
  </div>

  <script>
    // Leer carrito desde localStorage
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const listaCarrito = document.getElementById('lista-carrito');
    const totalCarrito = document.getElementById('total-carrito');
    const mensajeCompra = document.getElementById('mensaje-compra');
    const mensajeVacio = document.getElementById('mensaje-vacio');
    const formularioPago = document.getElementById('formulario-pago');

    function mostrarCarrito() {
      if (carrito.length === 0) {
        mensajeVacio.style.display = 'block';
        listaCarrito.style.display = 'none';
        totalCarrito.style.display = 'none';
        formularioPago.style.display = 'none';
        return;
      }

      mensajeVacio.style.display = 'none';
      listaCarrito.style.display = 'block';
      totalCarrito.style.display = 'block';
      formularioPago.style.display = 'flex';

      listaCarrito.innerHTML = '';
      let total = 0;

      carrito.forEach(juego => {
        const li = document.createElement('li');
        li.textContent = juego.nombre;
        const spanPrecio = document.createElement('span');
        spanPrecio.textContent = `$${parseFloat(juego.precio).toFixed(2)}`;
        li.appendChild(spanPrecio);
        listaCarrito.appendChild(li);
        total += parseFloat(juego.precio);
      });

      totalCarrito.textContent = `Total: $${total.toFixed(2)}`;
    }

    mostrarCarrito();

    formularioPago.addEventListener('submit', e => {
      e.preventDefault();

      // Aquí podrías agregar validaciones extras o integración con pasarela real

      // Limpiar carrito y mostrar mensaje
      localStorage.removeItem('carrito');
      formularioPago.style.display = 'none';
      listaCarrito.style.display = 'none';
      totalCarrito.style.display = 'none';
      mensajeCompra.style.display = 'block';
      mensajeCompra.textContent = '¡La compra se realizó correctamente! Gracias por su preferencia.';
    });
  </script>
</body>
</html>
